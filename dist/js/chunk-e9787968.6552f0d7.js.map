{"version":3,"sources":["webpack:///./src/views/Notification.vue?941d","webpack:///src/views/Notification.vue","webpack:///./src/views/Notification.vue?0299","webpack:///./src/views/Notification.vue","webpack:///./src/apis/socket.js","webpack:///./src/views/Notification.vue?482a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_l","item","type","key","id","attrs","avatar","_v","_s","name","tweet","_e","reply","staticRenderFns","components","data","messageList","computed","sockets","connection","console","log","notification","$socket","emit","unshift","length","account","UserId","tweetId","replyId","methods","component","getPublicRoom","apiHelper","get","createPrivateRoom","userId","post","getPrivateRoom","getNotification","getRoom","roomId","getRoomsByUser","getAvailableUsers","getUnread"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,eAAeA,EAAG,MAAM,CAACE,YAAY,eAAe,CAACN,EAAIO,GAAG,GAAGH,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAIR,EAAe,aAAE,SAASS,GAAM,MAAO,CAAgB,IAAdA,EAAKC,KAAYN,EAAG,KAAK,CAACO,IAAIF,EAAKG,GAAGN,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACS,MAAM,CAAC,IAAMJ,EAAKK,OAAO,IAAM,QAAQV,EAAG,KAAK,CAACJ,EAAIe,GAAGf,EAAIgB,GAAGP,EAAKQ,MAAM,cAAcb,EAAG,IAAI,CAACJ,EAAIe,GAAG,IAAIf,EAAIgB,GAAGP,EAAKS,OAAO,WAAWlB,EAAImB,KAAoB,IAAdV,EAAKC,KAAYN,EAAG,KAAK,CAACO,IAAIF,EAAKG,GAAGN,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACS,MAAM,CAAC,IAAMJ,EAAKK,OAAO,IAAM,QAAQV,EAAG,KAAK,CAACJ,EAAIe,GAAGf,EAAIgB,GAAGP,EAAKQ,MAAM,gBAAgBjB,EAAImB,KAAoB,IAAdV,EAAKC,KAAYN,EAAG,KAAK,CAACO,IAAIF,EAAKG,GAAGN,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACS,MAAM,CAAC,IAAMJ,EAAKK,OAAO,IAAM,QAAQV,EAAG,KAAK,CAACJ,EAAIe,GAAG,eAAeX,EAAG,IAAI,CAACJ,EAAIe,GAAG,IAAIf,EAAIgB,GAAGP,EAAKW,OAAO,WAAWpB,EAAImB,KAAoB,IAAdV,EAAKC,KAAYN,EAAG,KAAK,CAACO,IAAIF,EAAKG,GAAGN,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACS,MAAM,CAAC,IAAMJ,EAAKK,OAAO,IAAM,QAAQV,EAAG,KAAK,CAACJ,EAAIe,GAAGf,EAAIgB,GAAGP,EAAKQ,MAAM,iBAAiBjB,EAAImB,UAAS,KAAKf,EAAG,wBAAwB,IAC71CiB,EAAkB,CAAC,WAAa,IAAIrB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,KAAK,CAACJ,EAAIe,GAAG,Y,0GCyEtK,GACEE,KAAM,eACNK,WAAY,CAAd,+CACEC,KAHF,WAII,MAAO,CACLC,YAAa,KAGjBC,SAAU,OAAZ,OAAY,CAAZ,GACA,iCAEEC,QAAS,CACPC,WAAY,SAAhB,GACMC,QAAQC,IAAI,QAAUN,IAExBO,aAAc,SAAlB,GACMF,QAAQC,IAAI,eAAgBN,GAExBA,IACFK,QAAQC,IAAI,QACZ5B,KAAK8B,QAAQC,KACrB,QACA,CACU,GAAV,KACU,QAAV,UACU,KAAV,OACU,OAAV,KACU,OAAV,SACU,QAAV,UACU,MAAV,QACU,QAAV,UACU,MAAV,QACU,KAAV,QAEA,qBAEQ/B,KAAKuB,YAAYS,QAAQ,CACvBvB,KAAMa,EAAKb,KACXE,GAAIX,KAAKuB,YAAYU,OAAS,EAC9BC,QAASZ,EAAKY,QACdlB,KAAMM,EAAKN,KACXmB,OAAQb,EAAKX,GACbE,OAAQS,EAAKT,OACbuB,QAASd,EAAKc,QACdnB,MAAOK,EAAKL,MACZoB,QAASf,EAAKe,QACdlB,MAAOG,EAAKH,WAKpB,QAnDF,WAmDA,yLAEA,yBAFA,gBAEA,EAFA,EAEA,KACA,yBACA,gBAJA,mDAMA,kBACA,aACA,aACA,0BATA,4DAcEmB,QAAS,IC3I2U,I,wBCQlVC,EAAY,eACd,EACAzC,EACAsB,GACA,EACA,KACA,WACA,MAIa,aAAAmB,E,sECnBf,gBAEe,QACbC,cADa,WAGX,OAAOC,OAAUC,IAAI,aAEvBC,kBALa,SAKKC,GAChB,OAAOH,OAAUI,KAAK,SAAU,CAAED,YAGpCE,eATa,SASEF,GACb,OAAOH,OAAUC,IAAV,iBAAwBE,KAEjCG,gBAZa,WAaX,OAAON,OAAUC,IAAI,yBAEvBM,QAfa,SAeLC,GACN,OAAOR,OAAUC,IAAV,iBAAwBO,KAEjCC,eAlBa,WAoBX,OAAOT,OAAUC,IAAI,WAEvBS,kBAtBa,WAuBX,OAAOV,OAAUC,IAAI,yBAEvBU,UAzBa,WA0BX,OAAOX,OAAUC,IAAI,sB,oCC5BzB","file":"js/chunk-e9787968.6552f0d7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"notification flex\"},[_c('UserSidebar'),_c('div',{staticClass:\"mainSection\"},[_vm._m(0),_c('div',{staticClass:\"noti-panel\"},[_vm._l((_vm.messageList),function(item){return [(item.type === 1)?_c('li',{key:item.id,staticClass:\"tweetItem\"},[_c('div',{staticClass:\"tweet-noti\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"\"}})]),_c('h6',[_vm._v(_vm._s(item.name)+\" 有新的推文通知\")]),_c('p',[_vm._v(\" \"+_vm._s(item.tweet)+\" \")])])]):_vm._e(),(item.type === 2)?_c('li',{key:item.id,staticClass:\"followItem\"},[_c('div',{staticClass:\"follow-noti\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"\"}})]),_c('h6',[_vm._v(_vm._s(item.name)+\" 開始追蹤你\")])])]):_vm._e(),(item.type === 3)?_c('li',{key:item.id,staticClass:\"replyItem\"},[_c('div',{staticClass:\"reply-noti\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"\"}})]),_c('h6',[_vm._v(\"你的貼文有新的回覆\")]),_c('p',[_vm._v(\" \"+_vm._s(item.reply)+\" \")])])]):_vm._e(),(item.type === 4)?_c('li',{key:item.id,staticClass:\"likeItem\"},[_c('div',{staticClass:\"like-noti\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"\"}})]),_c('h6',[_vm._v(_vm._s(item.name)+\" 喜歡你的貼文\")])])]):_vm._e()]})],2)]),_c('RecommededFollowers')],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title stickyTitle\"},[_c('h1',[_vm._v(\"通知\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"notification flex\">\n    <!-- UserSidebar -->\n    <UserSidebar></UserSidebar>\n    <div class=\"mainSection\">\n      <div class=\"title stickyTitle\">\n        <h1>通知</h1>\n      </div>\n      <div class=\"noti-panel\">\n        <template v-for=\"item of messageList\">\n          <!-- tweetItem -->\n          <li v-if=\"item.type === 1\" class=\"tweetItem\" :key=\"item.id\">\n            <div class=\"tweet-noti\">\n              <div class=\"avatar\">\n                <img :src=\"item.avatar\" alt=\"\" />\n              </div>\n              <h6>{{ item.name }} 有新的推文通知</h6>\n              <p>\n                {{ item.tweet }}\n              </p>\n            </div>\n          </li>\n\n          <!-- followItem -->\n\n          <li v-if=\"item.type === 2\" class=\"followItem\" :key=\"item.id\">\n            <div class=\"follow-noti\">\n              <div class=\"avatar\">\n                <img :src=\"item.avatar\" alt=\"\" />\n              </div>\n              <h6>{{ item.name }} 開始追蹤你</h6>\n            </div>\n          </li>\n\n          <!-- replyItem -->\n\n          <li v-if=\"item.type === 3\" class=\"replyItem\" :key=\"item.id\">\n            <div class=\"reply-noti\">\n              <div class=\"avatar\">\n                <img :src=\"item.avatar\" alt=\"\" />\n              </div>\n              <h6>你的貼文有新的回覆</h6>\n              <p>\n                {{ item.reply }}\n              </p>\n            </div>\n          </li>\n\n          <!-- likeItem -->\n\n          <li v-if=\"item.type === 4\" class=\"likeItem\" :key=\"item.id\">\n            <div class=\"like-noti\">\n              <div class=\"avatar\">\n                <img :src=\"item.avatar\" alt=\"\" />\n              </div>\n              <h6>{{ item.name }} 喜歡你的貼文</h6>\n            </div>\n          </li>\n        </template>\n      </div>\n    </div>\n\n    <!-- RecommededFollowers -->\n    <RecommededFollowers></RecommededFollowers>\n  </div>\n</template>\n\n<script>\nimport UserSidebar from \"../components/Common/UserSidebar\";\nimport RecommededFollowers from \"../components/Common/RecommendedFollowers\";\nimport { mapState } from \"vuex\";\nimport { Toast } from \"../utils/helpers\";\nimport socketsAPI from \"../apis/socket\";\n\nexport default {\n  name: \"notification\",\n  components: { UserSidebar, RecommededFollowers },\n  data() {\n    return {\n      messageList: [],\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  sockets: {\n    connection: function (data) {\n      console.log(\"Data:\" + data);\n    },\n    notification: function (data) {\n      console.log(\"notification\", data);\n\n      if (data) {\n        console.log(\"data\");\n        this.$socket.emit(\n          \"tweet\",\n          {\n            id: data.id,\n            account: data.account,\n            name: data.name,\n            UserId: data.id,\n            avatar: data.avatar,\n            tweetId: data.tweetId,\n            tweet: data.tweet,\n            replyId: data.replyId,\n            reply: data.reply,\n            type: data.type,\n          },\n          this.currentUser.id\n        );\n        this.messageList.unshift({\n          type: data.type,\n          id: this.messageList.length + 1,\n          account: data.account,\n          name: data.name,\n          UserId: data.id,\n          avatar: data.avatar,\n          tweetId: data.tweetId,\n          tweet: data.tweet,\n          replyId: data.replyId,\n          reply: data.reply,\n        });\n      }\n    },\n  },\n  async created() {\n    try {\n      const { data } = await socketsAPI.getNotification();\n      console.log(\"apidata\", data);\n      this.messageList = data;\n    } catch (error) {\n      console.log(error);\n      Toast.fire({\n        icon: \"error\",\n        title: \"無法取得通知資料，請稍後再試！\",\n      });\n    }\n  },\n\n  methods: {},\n};\n</script>\n\n<style scoped>\n.mainSection {\n  overflow-y: scroll;\n}\n\n.avatar {\n  width: 25px;\n  height: 25px;\n}\n.avatar img {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  background-size: cover;\n  object-fit: cover;\n}\n\n.tweet-noti,\n.reply-noti,\n.follow-noti,\n.like-noti {\n  padding: 10px;\n  border-bottom: 1px solid #e6ecf0;\n}\n\nh6 {\n  margin-top: 10px;\n  font-weight: 900;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notification.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Notification.vue?vue&type=template&id=378698e2&scoped=true&\"\nimport script from \"./Notification.vue?vue&type=script&lang=js&\"\nexport * from \"./Notification.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Notification.vue?vue&type=style&index=0&id=378698e2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"378698e2\",\n  null\n  \n)\n\nexport default component.exports","import { apiHelper } from './../utils/helpers'\n\nexport default {\n  getPublicRoom() {\n    // getPublicRoom\n    return apiHelper.get('/rooms/4')\n  },\n  createPrivateRoom(userId) {\n    return apiHelper.post('/rooms', { userId })\n  },\n  // 未完成\n  getPrivateRoom(userId) {\n    return apiHelper.get(`/rooms/${userId}`)\n  },\n  getNotification() {\n    return apiHelper.get('/rooms/notifications')\n  },\n  getRoom(roomId) {\n    return apiHelper.get(`/rooms/${roomId}`)\n  },\n  getRoomsByUser() {\n    // get all chats by rooms\n    return apiHelper.get('/rooms')\n  },\n  getAvailableUsers() {\n    return apiHelper.get('rooms/availableUsers')\n  },\n  getUnread() {\n    return apiHelper.get('/private/unread')\n  }\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notification.vue?vue&type=style&index=0&id=378698e2&scoped=true&lang=css&\""],"sourceRoot":""}